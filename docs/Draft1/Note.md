方針メモ
==========



[2020/9/6] 
----------
- 分裂
- 敵からののりうつり （影ぼうし系、火ダルマ系）
- かさタヌキをねだやしにすると、かさタヌキが擬態していたアイテムは本物に変わる。 
- ぼうれい武者
    - 倒されても即 Entity 削除にならない。
- 草封印箱系
    - 状態異常の解除タイミングが、モンスターの消滅
- シレン2 シャチーン 系のジャンプ攻撃ははね返しの盾で防げる
- シレン5 スコッピー系
    - 対象によって特殊能力の影響が大きく異なる
        - 持っている壺に土を入れてくる。
        - 仲間が土をかけられた場合は目つぶし状態になる

[2020/9/6] Game_Player は使う？
----------

使わざるを得ないかも。ツクールは Player に依存している機能がいくつかある。

Game_Player が処理することは、
- 乗り物
- マップ移動
- フォロワー
- 歩数カウントとエンカウント
- 「プレイヤー～する」トリガーイベントの起動
- キー入力による移動処理
- スクロールの処理

特に重要なのはマップ移動・キー入力・スクロールあたり。
これは HC3 でやってたときの Gazer に相当する。

そのため本システムでは Player は常に透明&すり抜け扱いで、
視点移動を目的として使うのがよさそう。

操作キャラクターも含め、すべての Entity は Game_Event と関連付けて処理する。

### Game_Event の動的生成？

Game_Event はコンストラクタで mapId と eventId を受け取っている。
mapId はセルフスイッチの処理で使う。
eventId は、
- これを使って Game_Event.prototype.event で IDataEvent を取得している。
- Interpreter に渡して、「自分自身」を表すのに使う ($gameMap.event(eventId) みたいに使ってる)

Interpreter は最悪移動ルートを制限することもできると思う。

セルフスイッチは制限でいい。

そうすると Game_Event.prototype.event でアドホックな IDataEvent を返せるかどうか。

ちなみに謎解きプラグインでは、動的オブジェクトのコピー元は別マップにベント作ってあったので、それを返すだけで済んでいた。


[2020/9/6] Game_Character は使う？
----------

使う、でいいと思う。
主に他のプラグインとの協調が目的。
例えば、装飾で使う Event をランダムマップ上にコピーして配置したり、とか。


表示に関しては多分使った方が楽。
Sprite_Character の Model として振舞うので、
Game_Character を使わない、となると表示関係の多くは再実装になる。


Refs:

https://te4.org/wiki/Tales_of_Maj%27Eyal_Wiki
https://te4.org/docs/t-engine4/1.4.8/index.html


----------

```
choco install strawberryperl
npm install -g cloc
cloc ts --include-lang=TypeScript
```
