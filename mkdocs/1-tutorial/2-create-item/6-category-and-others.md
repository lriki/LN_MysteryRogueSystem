カテゴリ・トレイト
==========

アイテムの効果を発動するための主要な設定は、全ページまでで一通り説明を終えました。

ここでは、その他の細かな設定として推奨される要素について説明します。

カテゴリ
----------

`カテゴリ` はエンティティの分類情報です。エンティティはひとつのカテゴリに属します。

カテゴリは次のようなものがあります。

- アクター
- モンスター
- 武器
- 盾
- 草
- 巻物
- 階段

一般的なアイテムの分類と同じように考えることができますが、MRシステムではフロア間の階段や、杖を振った時に表示する魔法弾などもエンティティです。普段は気にする必要はありませんが、これらもカテゴリに属します。

カテゴリ (の Key) はメモ欄で `MR-Category` によって指定できます。

```
<MR-Category: kEntityCategory_Grass>
```

上記の場合アイテムは "草アイテム" カテゴリに属し、例えば未識別状態のアイテム名の表示が「白い草」「緑の草」のように草カテゴリの仮名リストが割り振られます。


トレイト（特徴）
----------

エンティティの細かな振る舞いのことを `トレイト` と呼びます。
これは RPGツクールのデータベースの「特徴」で設定するものと同様です。

トレイトは様々なものがありますが、ここでは `data/mr/Entities.js` の `kEntity_ポーションA` に次の設定を追加してみましょう

```diff
 "kEntity_ポーションA": Entity({
     reactions: [
         Reaction({
             actionKey: "kAction_Eat",
             emittorKeys: ["kEmittor_ポーションA_Main"],
             commandName: "飲む",
         }),
         Reaction({
             actionKey: "kAction_Collide",
             emittorKeys: ["kEmittor_ポーションA_投げ当て"],
         }),
    ],
+   selfTraits: [
+       Trait({ code: "DeathVulnerableElement", elementKey: "kElement_DeathExplosion", stateKey: "kState_System_ExplosionDeath" }),
+   ],
}),
```

このトレイトを付加すると、地雷などの強力な爆発属性の攻撃に巻き込まれたときに、アイテムが消滅するようになります。

!!! note "アイテムはデフォルトでは爆風を受けても消滅しない"
    これは設定忘れによって重要なアイテムを失うことによる詰みを防止するための仕様です。
    全てのアイテムに設定するのは面倒かもしれませんが、安全性のためのこのようにしています。



