基本概念
==========

本プラグインはツクール上に新たなゲームシステムを実現するために、新たなデータを多く追加します。

その中でも特に、システムを理解するために重要な要素を説明します。

エンティティ (Entity)
----------

通常、RPGツクールで NPC, ギミック, その他装飾などを作成するときには "イベント" を使います。

MRシステムではこれと似た `エンティティ` と呼ばれる仕組みがあります。
`エンティティ` はMRシステムの管理下の プレイヤーキャラクター、エネミー、アイテムなどのオブジェクトを表します。

イベントと似ていますが、`エンティティ` はゲーム全体で (マップをまたいで) 'ひとつの' オブジェクトを表す点が大きく異なります。

例えば武器 "ショートソード" を複数手に入れたときを考えてみましょう。
RPGツクール標準のシステムでは、アイテム画面を開いたときに "ショートソード 2" というようにまとめて表示されます。
MRシステムでは、2つの "ショートソード" は異なるアイテムとしてまとめられずに表示されます。

`TODO: キャプチャ`

個々の "ショートソード" は、+1, +2 といった修正値を振ったり、別のアイテムを合成して特殊能力を付加して育てることができるようになります。またMRシステム管理下のマップで "置く", "投げる" といった行動によって、マップ上に出現させることができます。
売買によって修正値を保ったまま他の NPC の手に渡ったり、爆発に巻き込まれて消滅したりします。

見た目を表す "イベント" と、データベースで定義されたアイテムなどの "データ" をひとまとめにしたものをイメージしてください。

`エンティティ` はこれ以外にも、MRシステム上の様々なものを表します。次のリストは一例です。

- プレイヤーキャラクター
- 仲間
- NPC
- 敵キャラ
- アイテム
- 罠
- 階段
- 飛翔体 (矢や魔法弾)

!!! note ""
    マップ上に登場できるオブジェクトは、すべてエンティティである、とも言えます。
    拡張によって罠を拾ったり、モンスターを捕まえて持ち物に入れる、といったシステムを開発する場合、この考えが重要になります。

プレハブ (Prefab)
----------

`プレハブ` は `エンティティ` の見た目です。

マップ上に出現している `エンティティ` は、自身を画面上に表示するために RPGツクールのイベントを利用します。
例えばアイテムを足元に置いたとき、プラグインによって新たなイベントが動的に作成されます。
この作成されるイベントのコピー元のイベントを `プレハブ` と呼びます。

ひとつの `エンティティ` には、必ず対応した `プレハブ` が必要となります。`プレハブ` が無ければ、`エンティティ` を作ることはできません。

先ほど `MR-Prefabs` というマップを確認しました。このマップでは、すべての `エンティティ` に対する `プレハブ` が用意されています。
またデータベースで `<MR-Prefab: ...>` という記述があったのを覚えているでしょうか？
これはデータベースで定義されているアクターや敵キャラといった `エンティティ` が、どのような見た目を持つか(プレハブを持つか) を決めるためのものです。

フロア (Floor) とランド (Land)
----------

`フロア` はダンジョンの階層ひとつ分です。さらに複数のフロアから成るひとつのダンジョンを `ランド` (地域) と呼びます。

説明のためダンジョンという呼び方をしましたが、 `ランド` の用途はダンジョンに限るものではありません。

MRシステム下に置かれた拠点マップ、街、倉庫、ボス部屋などの固定マップなどもそれぞれ `フロア` として扱い、フロアは必ずいずれかの `ランド` に属します。




